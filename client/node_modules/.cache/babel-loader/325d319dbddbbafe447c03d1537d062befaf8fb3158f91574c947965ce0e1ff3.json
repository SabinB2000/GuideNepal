{"ast":null,"code":"import _objectSpread from\"C:/Users/sabin/OneDrive/Desktop/GUIDE NEAPL/GuideNepal/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import axiosInstance from\"../utils/axiosConfig\";import Swal from\"sweetalert2\";import\"../styles/UserItineraryView.css\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const UserItineraryView=_ref=>{let{itineraryId}=_ref;const[it,setIt]=useState(null);const[editMode,setEditMode]=useState(false);const[form,setForm]=useState({title:\"\",description:\"\",places:[]});const[allPlaces,setAllPlaces]=useState([]);useEffect(()=>{fetchItinerary();fetchAllPlaces();},[itineraryId]);const fetchItinerary=async()=>{const{data}=await axiosInstance.get(\"/itineraries/\".concat(itineraryId));setIt(data);setForm({title:data.title,description:data.description,places:data.places.map(p=>p._id)});};const fetchAllPlaces=async()=>{const{data}=await axiosInstance.get(\"/places/db\");setAllPlaces(data);};const handleSave=async()=>{try{const{data}=await axiosInstance.put(\"/itineraries/\".concat(itineraryId),form);setIt(data);setEditMode(false);Swal.fire(\"Saved\",\"Your changes have been saved\",\"success\");}catch(e){console.error(e);Swal.fire(\"Error\",\"Could not save\",\"error\");}};if(!it)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading\\u2026\"});return/*#__PURE__*/_jsx(\"div\",{className:\"user-itinerary\",children:!editMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:it.title}),/*#__PURE__*/_jsx(\"p\",{children:it.description}),/*#__PURE__*/_jsx(\"h4\",{children:\"Places:\"}),/*#__PURE__*/_jsx(\"ul\",{children:it.places.map(p=>/*#__PURE__*/_jsx(\"li\",{children:p.name},p._id))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditMode(true),className:\"btn btn-primary\",children:\"Customize\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"itinerary-edit-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Itinerary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"title\",value:form.title,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{title:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{description:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Places (hold Ctrl/Cmd to multi-select):\"}),/*#__PURE__*/_jsx(\"select\",{multiple:true,value:form.places,onChange:e=>{const vals=Array.from(e.target.selectedOptions,o=>o.value);setForm(_objectSpread(_objectSpread({},form),{},{places:vals}));},children:allPlaces.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p._id,children:p.name},p._id))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"btn btn-success\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditMode(false),className:\"btn btn-secondary\",children:\"Cancel\"})]})});};export default UserItineraryView;","map":{"version":3,"names":["React","useState","useEffect","axiosInstance","Swal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","UserItineraryView","_ref","itineraryId","it","setIt","editMode","setEditMode","form","setForm","title","description","places","allPlaces","setAllPlaces","fetchItinerary","fetchAllPlaces","data","get","concat","map","p","_id","handleSave","put","fire","e","console","error","children","className","name","onClick","value","onChange","_objectSpread","target","multiple","vals","Array","from","selectedOptions","o"],"sources":["C:/Users/sabin/OneDrive/Desktop/GUIDE NEAPL/GuideNepal/client/src/pages/UserItineraryView.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axiosInstance from \"../utils/axiosConfig\";\r\nimport Swal from \"sweetalert2\";\r\nimport \"../styles/UserItineraryView.css\";\r\n\r\nconst UserItineraryView = ({ itineraryId }) => {\r\n  const [it, setIt]       = useState(null);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [form, setForm]   = useState({ title:\"\", description:\"\", places:[] });\r\n  const [allPlaces, setAllPlaces] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchItinerary();\r\n    fetchAllPlaces();\r\n  }, [itineraryId]);\r\n\r\n  const fetchItinerary = async () => {\r\n    const { data } = await axiosInstance.get(`/itineraries/${itineraryId}`);\r\n    setIt(data);\r\n    setForm({\r\n      title: data.title,\r\n      description: data.description,\r\n      places: data.places.map(p=>p._id)\r\n    });\r\n  };\r\n\r\n  const fetchAllPlaces = async () => {\r\n    const { data } = await axiosInstance.get(\"/places/db\");\r\n    setAllPlaces(data);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      const { data } = await axiosInstance.put(`/itineraries/${itineraryId}`, form);\r\n      setIt(data);\r\n      setEditMode(false);\r\n      Swal.fire(\"Saved\",\"Your changes have been saved\",\"success\");\r\n    } catch (e) {\r\n      console.error(e);\r\n      Swal.fire(\"Error\",\"Could not save\",\"error\");\r\n    }\r\n  };\r\n\r\n  if (!it) return <p>Loadingâ€¦</p>;\r\n\r\n  return (\r\n    <div className=\"user-itinerary\">\r\n      {!editMode ? (\r\n        <>\r\n          <h2>{it.title}</h2>\r\n          <p>{it.description}</p>\r\n          <h4>Places:</h4>\r\n          <ul>{it.places.map(p=>(\r\n            <li key={p._id}>{p.name}</li>\r\n          ))}</ul>\r\n          <button onClick={()=>setEditMode(true)} className=\"btn btn-primary\">\r\n            Customize\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <div className=\"itinerary-edit-form\">\r\n          <h2>Edit Itinerary</h2>\r\n          <div className=\"form-group\">\r\n            <label>Title:</label>\r\n            <input\r\n              name=\"title\"\r\n              value={form.title}\r\n              onChange={e=>setForm({...form, title:e.target.value})}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Description:</label>\r\n            <textarea\r\n              name=\"description\"\r\n              value={form.description}\r\n              onChange={e=>setForm({...form, description:e.target.value})}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Places (hold Ctrl/Cmd to multi-select):</label>\r\n            <select\r\n              multiple\r\n              value={form.places}\r\n              onChange={e=>{\r\n                const vals = Array.from(e.target.selectedOptions, o=>o.value);\r\n                setForm({...form, places:vals});\r\n              }}\r\n            >\r\n              {allPlaces.map(p=>(\r\n                <option key={p._id} value={p._id}>\r\n                  {p.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <button onClick={handleSave} className=\"btn btn-success\">\r\n            Save\r\n          </button>\r\n          <button onClick={()=>setEditMode(false)} className=\"btn btn-secondary\">\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserItineraryView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}